{% extends "base.html" %}

{% block link %}
    <link rel="stylesheet" href="../static/css/header.css">
    <link rel="stylesheet" href="../static/css/login.css">
    <link rel="stylesheet" href="../static/css/sidebar.css">
{% endblock %}

{% block sidebar %}<nav class="sidebar">
        <div class="sidebar-up">
            <ul>
                <li><a href="learn">Главная</a></li>
                <li><a href="learn/co-project">Совместные проекты</a></li>
                <li><a href="learn/question">Вопросы</a></li>
            </ul>
        </div>
        <div class="sidebar-down">
            <ul>
                <li><a href="/help">Помощь</a></li>
            </ul>
        </div>
    </nav>{% endblock %}

{% block content %}
<form action="" method="post">
    <style>
        table {
            border-collapse: collapse;
            border: 2px solid rgb(140 140 140);
            font-family: sans-serif;
            font-size: 0.8rem;
            letter-spacing: 1px;
        }

        caption {
            caption-side: top;
            padding: 10px;
            font-weight: bold;
        }

        thead,
        tfoot {
            background-color: rgb(228 240 245);
        }

        th,
        td {
            border: 1px solid rgb(160 160 160);
            padding: 8px 10px;
        }

        td:last-of-type {
            text-align: center;
        }

        tbody>tr:nth-of-type(even) {
            background-color: rgb(237 238 242);
        }

        tfoot th {
            text-align: right;
        }

        tfoot td {
            font-weight: bold;
        }
    </style>
    {% if courses %}
    {% for course in courses%}
    <table>
        <caption>
            Курс {{course.id}}
          </caption>
        <thead>
            <tr>
                <th scope="col">Название</th>
                <th scope="col">Описание</th>
                <th scope="col">Кол-во уроков</th>
                <th scope="col">Создатель</th>
                <th scope="col">Статус</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <th scope="row">
                    {{course.title}}
                </th>
                <td>
                    {{course.description}}
                </td>
                <td>
                    {{course.list_of_lessons.split(', ')|length}} уроков
                </td>
                <td>
                    {{users[course.user_id - 1].name}}
                </td>
                <td>
                    {% if current_user.is_authenticated %}
                    {%if course.id in current_user.completed_courses.split(', ')%}
                    Пройден
                    {%else%}
                    Не Пройден
                    {%endif%}
                    {%else%}
                    Войдите в аккаунт чтобы узнать статус
                    {%endif%}

                </td>
            </tr>

        </tbody>
    </table>
    {% endfor %}
    {% else %}
    <h1>Курсов ещё нет</h1>
    {% endif %}
</form>
{% endblock %}