{% extends "base.html" %}

{% block link %}
    <link rel="stylesheet" href="../static/css/header.css">
    <link rel="stylesheet" href="../static/css/sidebar.css">
    <link rel="stylesheet" href="../static/css/list_of_courses.css">
{% endblock %}

{% block sidebar %}
<nav class="sidebar">
    <div class="content-lesson">
            <ul>
                <li><a href="/lesson">Главная</a></li>
                <li><a href="/lesson">Совместные проекты</a></li>
                <li><a href="/lesson">Вопросы</a></li>
            </ul>
    </div>
</nav>
{% endblock %}

{% block content %}
<div class="main-content">
    <form action="" method="post">
        {% if courses %}
        {% for course in courses %}
        <table>
            <caption>
                Курс {{course.id}}
              </caption>
            <thead>
                <tr>
                    <th scope="col">Название</th>
                    <th scope="col">Описание</th>
                    <th scope="col">Создатель</th>
                    <th scope="col">Статус</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <th scope="row">
                        {{course.title}}
                    </th>
                    <td>
                        {{course.description | safe}}
                    </td>
                    <td>
                        {{users[course.user_id - 1].name}}
                    </td>
                    <td>
                        {% if current_user.is_authenticated %}
                        {%if course.id | string() in current_user.completed_courses%}
                        Пройден
                        {%else%}
                        Не пройден
                        {%endif%}
                        {%else%}
                        Войдите в аккаунт чтобы узнать статус
                        {%endif%}
                    </td>
                </tr>
    
            </tbody>
        </table>
        <a href="learn/{{ course.name }}">Пройти</a>
        {% endfor %}
        {% else %}
        <h1>Курсов ещё нет</h1>
        {% endif %}
    </form>
</div>
{% endblock %}